(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,a){e.exports=a(75)},72:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),o=a.n(s),l=a(9),c=(a(49),a(6)),i=a(7),u=a(10),m=a(8),d=a(11),p=a(78),h=a(77),b=a(79),f=a(2),k=a(15),v=a(26),g=a(18),y=Object(g.a)(),E=a(76),j="AUTH",O="LOGOUT",T="admin",N="123",x={success:"successAuth",invalidData:"invalidData",emptyContent:"emptyContent",logout:"logout"},w=function(e){return e.name&&e.password?e.name===T&&e.password===N?(y.push("/"),{type:j,payload:{status:x.success,name:T}}):{type:j,payload:{status:x.invalidData}}:{type:j,payload:{status:x.emptyContent}}},C=function(){return y.push("/"),{type:O}},D=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onLogout",value:function(e){e.preventDefault(),this.props.logout()}},{key:"render",value:function(){var e=this.props.login;return e.status===x.success?r.a.createElement("div",null,r.a.createElement("span",{className:"text-white"},e.name," ","|"),r.a.createElement(E.a,{to:"/logout",onClick:this.onLogout.bind(this)},"Logout")):r.a.createElement(E.a,{to:"/login"},"Login")}}]),t}(n.Component);var F=Object(l.b)(function(e){return{login:e.login}},function(e){return Object(f.bindActionCreators)({logout:C},e)})(D);var I=function(){return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar navbar-toggleable-md navbar-inverse bg-inverse justify-content-between"},r.a.createElement("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement(E.a,{to:"/"},r.a.createElement("span",{className:"navbar-brand"},"Home")),r.a.createElement(F,null)))},S=a(5),L=a(19),A=a.n(L),B=a(36),M="https://uxcandy.com/~shapoval/test-task-backend",P={developer:"Vadim"},U="FETCH_TASKS",_="ADD_TASK",q="EDIT_TASK",R="SET_SORT",H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Object(S.a)({},P,{page:e});return n=t?Object(S.a)({},n,{sort_field:t,sort_direction:a}):n,function(t){return A.a.get("".concat(M,"/"),{params:n}).then(function(a){t({type:U,payload:{currTasks:a.data.message.tasks,total:a.data.message.total_task_count,page:e}})})}},K=function(e){var t=new FormData;return t.append("username",e.username),t.append("email",e.email),t.append("text",e.text),function(e){return A.a.post("".concat(M,"/create"),t,{headers:{"Content-Type":"multipart/form-data"},params:P}).then(function(t){e({type:_,payload:Object(S.a)({},t.data.message)})})}},J=function(e){return function(t){var a=encodeURIComponent(e.status),n=encodeURIComponent(e.text),r=encodeURIComponent("beejee"),s="status=".concat(a,"&text=").concat(n,"&token=").concat(r),o=B(s),l=new FormData;return l.append("status",e.status),l.append("text",e.text),l.append("signature",o),l.append("token","beejee"),A.a.post("".concat(M,"/edit/").concat(e.id),l,{headers:{"Content-Type":"multipart/form-data"},params:Object(S.a)({},P)}).then(function(){t({type:q,payload:Object(S.a)({},e)})})}},V=function(e){return{type:R,payload:e}},W=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"showForm",value:function(){document.getElementById("taskForm").classList.toggle("d-none")}},{key:"createTask",value:function(e){e.preventDefault();var t={username:this.userName.value,email:this.email.value,text:this.text.value};this.props.addTask(t),this.clearInputForm()}},{key:"clearInputForm",value:function(){this.userName.value="",this.email.value="",this.text.value="",document.getElementById("taskForm").classList.add("hidden")}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-outline-success",onClick:this.showForm},"Add new task"),r.a.createElement("form",{onSubmit:function(t){return e.createTask(t)},id:"taskForm",className:"d-none mt-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"taskUserName"},"User name: *"),r.a.createElement("input",{type:"text",className:"form-control",id:"taskUserName",maxLength:"48",required:!0,ref:function(t){return e.userName=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"taskEmail"},"Email: *"),r.a.createElement("input",{type:"email",className:"form-control",id:"taskEmail",maxLength:"48",required:!0,ref:function(t){return e.email=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"taskBody"},"Task: *"),r.a.createElement("textarea",{className:"form-control",id:"taskBody",rows:"2",maxLength:"240",required:!0,ref:function(t){return e.text=t}})),r.a.createElement("button",{type:"submit",className:"btn btn-outline-info"},"Create task")))}}]),t}(n.Component);var G=Object(l.b)(null,function(e){return Object(f.bindActionCreators)({addTask:function(e){return K(e)}},e)})(W),Y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t={id:this.props.taskData.id,status:this.status.checked?10:0,text:this.text.value};this.props.editTask(t),this.props.onClose()}},{key:"render",value:function(){var e=this,t=this.props,a=t.taskData,n=t.status,s=t.onClose;return r.a.createElement("div",{className:"modal-form"},r.a.createElement("form",{className:"row col-12 justify-content-center",onSubmit:this.onSubmit.bind(this)},r.a.createElement("h2",null,"Edit task"),r.a.createElement("div",{className:"row col-12 justify-content-end"},r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:s},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",id:"checkbox",className:"form-check-input",ref:function(t){return e.status=t},defaultChecked:10===a.status}),r.a.createElement("label",{className:"form-check-label",htmlFor:"checkbox"},r.a.createElement("b",null,"Is complete?"))),r.a.createElement("h1",null,n),r.a.createElement("div",{className:"col-12 form-group"},r.a.createElement("label",{htmlFor:"text"},"Task text"),r.a.createElement("textarea",{className:"form-control",id:"text",placeholder:"Text",maxLength:"100",required:!0,ref:function(t){return e.text=t},defaultValue:a.text})),r.a.createElement("button",{type:"submit",className:"col-6 btn btn-primary"},"Edit")))}}]),t}(n.Component);var z=Object(l.b)(null,function(e){return Object(f.bindActionCreators)({editTask:function(e){return J(e)}},e)})(Y),Q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"closeModal",value:function(e){e.target.classList.contains("modal-container")&&this.props.onClose()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,a=e.onClose,n=e.taskData;return t?o.a.createPortal(r.a.createElement("div",{className:"modal-container",onClick:this.closeModal.bind(this),role:"presentation"},r.a.createElement(z,{onClose:a,taskData:n})),document.body):null}}]),t}(n.Component),X=a(20),Z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={variantsSortIcon:{active:"sort-amount-up",default:"sort-amount-down"},showEditModal:!1,editPopupData:{id:null,status:null,text:null}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"setSortTasks",value:function(e){var t=e.currentTarget.getAttribute("data-sort-field");this.props.setSort(t)}},{key:"changeTabTasks",value:function(e){var t=e.currentTarget.getAttribute("data-pageno"),a=this.props.tasks.sortField,n=this.props.tasks.sortByDesk?"desc":"asc";this.props.fetchTasks(t,a,n)}},{key:"editTask",value:function(e,t,a){var n={id:e,status:t,text:a};this.setState({showEditModal:!0}),this.setState({editPopupData:n})}},{key:"editModalClose",value:function(){this.setState({showEditModal:!1})}},{key:"showListTasks",value:function(){var e=this;return this.props.tasks.currTaskTab?this.props.tasks.currTaskTab.map(function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",{className:"text-center"},r.a.createElement("input",{type:"checkbox",checked:10===t.status,disabled:!0})),r.a.createElement("td",{className:"text-center"},t.username),r.a.createElement("td",{className:"text-center"},t.email),r.a.createElement("td",{className:"text-center"},t.text),r.a.createElement("td",{className:e.props.login.isLogged?"":"d-none"},r.a.createElement("button",{className:"col-12 btn btn-success",onClick:function(){return e.editTask(t.id,t.status,t.text)}},"Edit")))}):r.a.createElement("tr",null,r.a.createElement("td",null,"You haven't any tasks!"))}},{key:"showPagination",value:function(){var e=this.props.tasks.totalTasks/3;e=e?e%1===0?e:e+1:1;for(var t=[],a=1;a<=e;a++)t.push(r.a.createElement("li",{className:"page-item ".concat(a===this.props.tasks.page?"active":""),key:a,"data-pageno":a,onClick:this.changeTabTasks.bind(this)},r.a.createElement("span",{className:"page-link"},a)));return t}},{key:"render",value:function(){var e=this.state,t=e.showEditModal,a=e.editPopupData,s=e.variantsSortIcon,o=this.props.tasks.sortField;return r.a.createElement(n.Fragment,null,r.a.createElement(Q,{taskData:a,isOpen:t,onClose:this.editModalClose.bind(this)}),r.a.createElement("div",null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center",onClick:this.setSortTasks.bind(this),"data-sort-field":"status"},"Status",r.a.createElement(X.a,{icon:"status"!==o||this.props.tasks.sortByDesk?s.default:s.active})),r.a.createElement("th",{className:"text-center",onClick:this.setSortTasks.bind(this),"data-sort-field":"username"},"User Name",r.a.createElement(X.a,{icon:"username"!==o||this.props.tasks.sortByDesk?s.default:s.active})),r.a.createElement("th",{className:"text-center",onClick:this.setSortTasks.bind(this),"data-sort-field":"email"},"Email",r.a.createElement(X.a,{icon:"email"!==o||this.props.tasks.sortByDesk?s.default:s.active})),r.a.createElement("th",{className:"text-center"},"Text"),r.a.createElement("th",{className:"text-center ".concat(this.props.login.isLogged?"":"d-none")},"Edit"))),r.a.createElement("tbody",null,this.showListTasks())),r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination justify-content-center"},this.showPagination())),r.a.createElement(G,null)))}}]),t}(n.Component);var $=Object(l.b)(function(e){return{login:e.login,tasks:e.tasks}},function(e){return Object(f.bindActionCreators)({fetchTasks:function(e,t,a){return H(e,t,a)},setSort:function(e){return V(e)}},e)})(Z);function ee(){return r.a.createElement("div",{className:"container list-container"},r.a.createElement("h6",{className:"border-bottom border-gray pb-2 mb-0"},"Recent tasks:"),r.a.createElement($,null))}var te=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={authErrorsText:{emptyContent:"\u041d\u0435\u043e\u0431\u0445\u0456\u0434\u043d\u043e \u0437\u0430\u043f\u043e\u0432\u043d\u0438\u0442\u0438 \u0432\u0441\u0456 \u043f\u043e\u043b\u044f",invalidData:"\u041d\u0435\u0432\u0456\u0440\u043d\u0456 \u0434\u0430\u043d\u0456"}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"auth",value:function(e){e.preventDefault();var t=this.loginInput.value,a=this.passwordInput.value;this.props.auth({name:t,password:a})}},{key:"showErrors",value:function(){var e=this.props.login.status;return e===x.invalidData||e===x.emptyContent?(this.clearInputForm(),r.a.createElement("div",{className:"col-12 alert alert-danger",role:"alert"},this.state.authErrorsText[e])):null}},{key:"clearInputForm",value:function(){this.loginInput.value="",this.passwordInput.value=""}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.auth.bind(this),className:"row col-xs-6 col-lg-4 justify-content-center"},this.showErrors(),r.a.createElement("div",{className:"col-12 form-group"},r.a.createElement("label",{htmlFor:"login"},"Login"),r.a.createElement("input",{type:"text",className:"form-control",id:"login","aria-describedby":"loginHelp",placeholder:"Enter login",maxLength:"20",required:!0,ref:function(t){return e.loginInput=t}}),r.a.createElement("small",{id:"loginHelp",className:"form-text text-muted"},"Enter valid login")),r.a.createElement("div",{className:"col-12 form-group"},r.a.createElement("label",{htmlFor:"passwordInput"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"passwordInput",placeholder:"Password",maxLength:"40",required:!0,ref:function(t){return e.passwordInput=t}})),r.a.createElement("button",{type:"submit",className:"col-6 btn btn-primary"},"Sign in"))}}]),t}(n.Component);var ae=Object(l.b)(function(e){return{login:e.login}},function(e){return Object(f.bindActionCreators)({auth:function(e){return w(e)}},e)})(te);function ne(){return r.a.createElement("div",{className:"container row col-12 justify-content-center login-container"},r.a.createElement(ae,null))}var re=function(){return r.a.createElement("div",{className:"row justify-content-center "},r.a.createElement("h3",{className:"row col-12 justify-content-center"},"Sorry this page not found"),r.a.createElement(E.a,{to:"/"},"Back to home page"))};a(72);k.b.add(v.b,v.a);var se=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchTasks()}},{key:"render",value:function(){return r.a.createElement(p.a,{history:y},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(I,null),r.a.createElement(h.a,null,r.a.createElement(b.a,{path:"/",exact:!0,component:ee}),r.a.createElement(b.a,{path:"/login",component:ne}),r.a.createElement(b.a,{path:"*",component:re}))))}}]),t}(n.Component);var oe=Object(l.b)(function(e){return{tasks:e.tasks}},function(e){return Object(f.bindActionCreators)({fetchTasks:H},e)})(se),le=a(38),ce=a(39),ie={isLogged:!1,name:null,status:x.default};var ue,me,de,pe,he,be=a(27),fe={page:1,sortField:null,sortByDesk:!0};var ke=Object(f.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return t.payload.status!==x.success?Object(S.a)({},e,{isLogged:!1,status:t.payload.status}):Object(S.a)({},e,{name:t.payload.name,isLogged:!0,status:x.success});case O:return Object(S.a)({},e,{isLogged:!1,name:null,status:x.logout});default:return Object(S.a)({},e)}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(S.a)({},e,{currTaskTab:t.payload.currTasks,totalTasks:parseInt(t.payload.total,10),page:parseInt(t.payload.page,10)});case _:return me=parseInt(e.totalTasks,10)+1,ue=me/3%1===0?parseInt(me/3,10):parseInt(me/3,10)+1,Object(S.a)({},e,{currTaskTab:ue===e.page?[].concat(Object(be.a)(e.currTaskTab),[t.payload]):e.currTaskTab,totalTasks:me});case R:return he=(!e.sortField||e.sortField===t.payload)&&!e.sortByDesk,pe=Object(be.a)(e.currTaskTab).sort(function(e,a){return"status"===t.payload?he?e[t.payload]-a[t.payload]:a[t.payload]-e[t.payload]:he?e[t.payload]>a[t.payload]?-1:e[t.payload]<a[t.payload]?1:0:e[t.payload]>a[t.payload]?1:e[t.payload]<a[t.payload]?-1:0}),Object(S.a)({},e,{currTaskTab:pe,sortField:t.payload,sortByDesk:he});case q:return de=e.currTaskTab.map(function(e){return e.id===t.payload.id?Object(S.a)({},e,t.payload):e}),Object(S.a)({},e,{currTaskTab:de});default:return Object(S.a)({},e)}}}),ve=Object(f.createStore)(ke,Object(le.composeWithDevTools)(Object(f.applyMiddleware)(ce.a)));o.a.render(r.a.createElement(l.a,{store:ve},r.a.createElement(oe,null)),document.getElementById("root"))}},[[40,2,1]]]);
//# sourceMappingURL=main.9244fa26.chunk.js.map